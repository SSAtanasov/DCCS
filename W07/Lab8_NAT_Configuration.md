# LAB 8: NAT (Network Address Translation) –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
## –°–∏–º—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–≤—ä—Ä–∑–∞–Ω–æ—Å—Ç

**–ü—Ä–æ–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ—Å—Ç:** 90-120 –º–∏–Ω—É—Ç–∏  
**–¶–µ–ª:** –ù–∞—É—á–∞–≤–∞–Ω–µ –Ω–∞ NAT –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞ —Å–∏–º—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ –≤—Ä—ä–∑–∫–∞ —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∏ —Å–ø–æ–¥–µ–ª—è–Ω–µ –Ω–∞ –ø—É–±–ª–∏—á–Ω–∏ IP –∞–¥—Ä–µ—Å–∏  
**Prerequisite:** –ó–∞–≤—ä—Ä—à–µ–Ω–∏ Lab 1-5 (–æ—Å–æ–±–µ–Ω–æ Lab 5 –∑–∞ ACL)

> **üîó –í–†–™–ó–ö–ê –° LAB 7 –ò LAB 9:**  
> –¢–æ–∑–∏ –ª–∞–± –º–æ–∂–µ –¥–∞ —Å–µ –∏–∑–ø—ä–ª–Ω–∏ **–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ** –æ—Ç Lab 1-7 (–æ—Ç–¥–µ–ª–Ω–∞ —Ç–æ–ø–æ–ª–æ–≥–∏—è).  
> –°–ª–µ–¥ Lab 8 –ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞—Ç–µ —Å **Lab 9**, –∫—ä–¥–µ—Ç–æ —â–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–∞—Ç–µ NAT —Å —Ü—è–ª–∞—Ç–∞ –º—Ä–µ–∂–∞ –æ—Ç Lab 1-7.

> ** –°–õ–ï–î–í–ê–©–ò –°–¢–™–ü–ö–ò:**  
> –°–ª–µ–¥ —Ç–æ–∑–∏ –ª–∞–± –ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞—Ç–µ —Å **Lab 9** (Integrated Network Design), –∫—ä–¥–µ—Ç–æ —â–µ –∫–æ–º–±–∏–Ω–∏—Ä–∞—Ç–µ NAT —Å VLANs, DHCP, DNS, ACL.

> ** –ó–ê –ö–£–†–°–û–í–ò–Ø –ü–†–û–ï–ö–¢:**  
> NAT –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ç–∞ –µ **–û–ü–¶–ò–û–ù–ê–õ–ù–ê** –∑–∞ –ö–ü, –Ω–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–∞:
> - –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞ enterprise –º—Ä–µ–∂–∞ —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–æ—Å—Ç—ä–ø
> - Professional network design skills
> - –†–∞–∑–±–∏—Ä–∞–Ω–µ –Ω–∞ WAN connectivity

---
## –¢–ï–û–†–ï–¢–ò–ß–ù–ê –û–°–ù–û–í–ê (–†–ê–ó–®–ò–†–ï–ù–ê)

### –ö–∞–∫–≤–æ –µ NAT?

**Network Address Translation (NAT)** –µ –º–µ—Ö–∞–Ω–∏–∑—ä–º –∑–∞ **–ø—Ä–µ–æ–±—Ä–∞–∑—É–≤–∞–Ω–µ –Ω–∞ IP –∞–¥—Ä–µ—Å–∏** –ø—Ä–∏ –ø—Ä–µ–º–∏–Ω–∞–≤–∞–Ω–µ –Ω–∞ –ø–∞–∫–µ—Ç–∏ –º–µ–∂–¥—É –º—Ä–µ–∂–∏ —Å —Ä–∞–∑–ª–∏—á–Ω–∏ –∞–¥—Ä–µ—Å–Ω–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞.

**–ü—Ä–æ—Å—Ç–∞ –∞–Ω–∞–ª–æ–≥–∏—è:**
```
NAT –µ –∫–∞—Ç–æ –ø–æ—Ä—Ç–∏–µ—Ä –Ω–∞ —Ö–æ—Ç–µ–ª:

–í–∏–µ (192.168.1.10) –∏—Å–∫–∞—Ç–µ –¥–∞ –∏–∑–ø—Ä–∞—Ç–∏—Ç–µ –ø–∏—Å–º–æ
‚Üì
–ü–æ—Ä—Ç–∏–µ—Ä—ä—Ç (NAT Router) –≥–æ –≤–∑–µ–º–∞ –∏ –ø–∏—à–µ —Å–≤–æ—è –∞–¥—Ä–µ—Å –∫–∞—Ç–æ –∏–∑–ø—Ä–∞—â–∞—á
‚Üì
–ü–∏—Å–º–æ—Ç–æ –∏–∑–ª–∏–∑–∞ —Å –∞–¥—Ä–µ—Å –Ω–∞ —Ö–æ—Ç–µ–ª–∞ (203.0.113.1)
‚Üì
–û—Ç–≥–æ–≤–æ—Ä—ä—Ç —Å–µ –≤—Ä—ä—â–∞ –Ω–∞ —Ö–æ—Ç–µ–ª–∞
‚Üì
–ü–æ—Ä—Ç–∏–µ—Ä—ä—Ç –≥–æ –ø—Ä–µ–ø—Ä–∞—â–∞ –Ω–∞ –≤–∞—Å –≤ —Å—Ç–∞—è 192.168.1.10
```

---

### –ó–∞—â–æ –µ –Ω—É–∂–µ–Ω NAT? (IPv4 Address Exhaustion)

**–ò—Å—Ç–æ—Ä–∏—è—Ç–∞ –Ω–∞ IPv4 –∫—Ä–∏–∑–∞—Ç–∞:**

IPv4 –ø—Ä–µ–¥–ª–∞–≥–∞ **4.3 –º–∏–ª–∏–∞—Ä–¥–∞ –∞–¥—Ä–µ—Å–∞** (2¬≥¬≤ = 4,294,967,296)

```
1980s: "4 –º–∏–ª–∏–∞—Ä–¥–∞ –∞–¥—Ä–µ—Å–∞ —â–µ —Å—Ç–∏–≥–Ω–∞—Ç –∑–∞–≤–∏–Ω–∞–≥–∏!"
1990s: "–•–º, –º–æ–∂–µ –±–∏ –Ω–µ..."
2011: IANA –æ–±—è–≤–∏ –ò–ó–ß–ï–†–ü–í–ê–ù–ï –Ω–∞ IPv4 –∞–¥—Ä–µ—Å–∏—Ç–µ
2024: –í—Å–µ –æ—â–µ –∏–∑–ø–æ–ª–∑–≤–∞–º–µ IPv4 —Å NAT –∫–∞—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ —Ä–µ—à–µ–Ω–∏–µ
```

**–ë–µ–∑ NAT:**
- –í—Å—è–∫–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–º–∞ –ø—É–±–ª–∏—á–µ–Ω IP –∞–¥—Ä–µ—Å
- –ö–æ–º–ø–∞–Ω–∏—è —Å—ä—Å 500 –∫–æ–º–ø—é—Ç—ä—Ä–∞ = 500 –ø—É–±–ª–∏—á–Ω–∏ IP –∞–¥—Ä–µ—Å–∞
- –î–æ–º–∞–∫–∏–Ω—Å—Ç–≤–æ —Å 10 —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ = 10 –ø—É–±–ª–∏—á–Ω–∏ IP –∞–¥—Ä–µ—Å–∞
- **–ù–ï–í–™–ó–ú–û–ñ–ù–û** - –Ω—è–º–∞ —Ç–æ–ª–∫–æ–≤–∞ –∞–¥—Ä–µ—Å–∏!

**–° NAT:**
- –¶—è–ª–∞ –∫–æ–º–ø–∞–Ω–∏—è —Å–ø–æ–¥–µ–ª—è 1-5 –ø—É–±–ª–∏—á–Ω–∏ IP –∞–¥—Ä–µ—Å–∞
- –î–æ–º–∞–∫–∏–Ω—Å—Ç–≤–æ—Ç–æ —Å–ø–æ–¥–µ–ª—è 1 –ø—É–±–ª–∏—á–µ–Ω IP
- **–†–ê–ë–û–¢–ò** - PAT –∏–∑–ø–æ–ª–∑–≤–∞ –ø–æ—Ä—Ç–æ–≤–µ –∑–∞ —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–∞–≤–∞–Ω–µ

---

### Private vs Public IP –∞–¥—Ä–µ—Å–∏

**RFC 1918 –¥–µ—Ñ–∏–Ω–∏—Ä–∞ PRIVATE IP ranges:**

| –ö–ª–∞—Å | Private Range | Subnet | –ë—Ä–æ–π –∞–¥—Ä–µ—Å–∏ |
|------|---------------|--------|-------------|
| –ö–ª–∞—Å A | 10.0.0.0 - 10.255.255.255 | 10.0.0.0/8 | 16,777,216 |
| –ö–ª–∞—Å B | 172.16.0.0 - 172.31.255.255 | 172.16.0.0/12 | 1,048,576 |
| –ö–ª–∞—Å C | 192.168.0.0 - 192.168.255.255 | 192.168.0.0/16 | 65,536 |

**–ü—Ä–∞–≤–∏–ª–∞ –∑–∞ private IPs:**
- ‚úÖ **–ú–æ–∂–µ** –¥–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç –≤—ä—Ç—Ä–µ –≤ –ª–æ–∫–∞–ª–Ω–∞ –º—Ä–µ–∂–∞ (LAN)
- ‚ùå **–ù–ï –º–æ–∂–µ** –¥–∞ —Å–µ —Ä—É—Ç–∏—Ä–∞—Ç –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
- ‚úÖ **–ú–æ–∂–µ** –¥–∞ —Å–µ –ø–æ–≤—Ç–∞—Ä—è—Ç –≤ —Ä–∞–∑–ª–∏—á–Ω–∏ –º—Ä–µ–∂–∏ (–≤—Å–µ–∫–∏ –∏–º–∞ 192.168.1.1)
- üîÑ **–ò–∑–∏—Å–∫–≤–∞—Ç NAT** –∑–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∫–æ–º—É–Ω–∏–∫–∞—Ü–∏—è

**–ü—É–±–ª–∏—á–Ω–∏ IP –∞–¥—Ä–µ—Å–∏:**
- –£–Ω–∏–∫–∞–ª–Ω–∏ –≤ —Ü–µ–ª–∏—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
- –¢—Ä—è–±–≤–∞ –¥–∞ —Å–µ –∑–∞–∫—É–ø—è—Ç/–Ω–∞–µ–º–∞—Ç –æ—Ç ISP
- –°–∫—ä–ø–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏
- –ù–µ–æ–±—Ö–æ–¥–∏–º–∏ –∑–∞ —É—Å–ª—É–≥–∏ –¥–æ—Å—Ç—ä–ø–Ω–∏ –æ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç

---

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∏ NAT? (–ü—Ä–æ—Ü–µ—Å —Å—Ç—ä–ø–∫–∞ –ø–æ —Å—Ç—ä–ø–∫–∞)

**–°—Ü–µ–Ω–∞—Ä–∏–π:** PC1 (192.168.10.10) –∏—Å–∫–∞ –¥–∞ –¥–æ—Å—Ç—ä–ø–∏ Google (8.8.8.8)

```
–°–¢–™–ü–ö–ê 1: PC –∏–∑–ø—Ä–∞—â–∞ –ø–∞–∫–µ—Ç
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Source: 192.168.10.10:54321   ‚îÇ ‚Üê Private IP + random port
‚îÇ Dest:   8.8.8.8:80            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ
        ‚Üì
    [NAT Router]
        ‚îÇ
        ‚Üì
–°–¢–™–ü–ö–ê 2: NAT Router —Ç—Ä–∞–Ω—Å–ª–∏—Ä–∞
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Source: 203.0.113.1:54321     ‚îÇ ‚Üê Public IP + —Å—ä—â–∏—è/–Ω–æ–≤ port
‚îÇ Dest:   8.8.8.8:80            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ
        ‚Üì
    [INTERNET]
        ‚îÇ
        ‚Üì
–°–¢–™–ü–ö–ê 3: Google –æ—Ç–≥–æ–≤–∞—Ä—è
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Source: 8.8.8.8:80            ‚îÇ
‚îÇ Dest:   203.0.113.1:54321     ‚îÇ ‚Üê –ü—É–±–ª–∏—á–µ–Ω IP –Ω–∞ Router-–∞
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ
        ‚Üì
    [NAT Router]
        ‚îÇ
        ‚Üì (–ø—Ä–æ–≤–µ—Ä—è–≤–∞ NAT —Ç–∞–±–ª–∏—Ü–∞—Ç–∞: 54321 ‚Üí 192.168.10.10:54321)
        ‚îÇ
–°–¢–™–ü–ö–ê 4: Router –ø—Ä–µ–ø—Ä–∞—â–∞ –∫—ä–º PC
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Source: 8.8.8.8:80            ‚îÇ
‚îÇ Dest:   192.168.10.10:54321   ‚îÇ ‚Üê –û–±—Ä–∞—Ç–Ω–æ –∫—ä–º private IP
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**NAT Translation Table:**
```
Inside Local      Inside Global      Outside Global
192.168.10.10:54321 ‚Üí 203.0.113.1:54321 ‚Üí 8.8.8.8:80
192.168.10.11:54322 ‚Üí 203.0.113.1:54322 ‚Üí 8.8.8.8:80
192.168.10.12:54323 ‚Üí 203.0.113.1:54323 ‚Üí 1.1.1.1:443
```

---

### NAT –¢–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è (–í–∞–∂–Ω–æ!)

| –¢–µ—Ä–º–∏–Ω | –ó–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|--------|----------|--------|
| **Inside Local** | Private IP –∞–¥—Ä–µ—Å –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ—Ç–æ | 192.168.10.10 |
| **Inside Global** | Public IP –∞–¥—Ä–µ—Å —Å–ª–µ–¥ NAT | 203.0.113.1 |
| **Outside Global** | Public IP –∞–¥—Ä–µ—Å –Ω–∞ external host | 8.8.8.8 |
| **Outside Local** | –ö–∞–∫ external host —Å–µ –≤–∏–∂–¥–∞ –æ—Ç inside | 8.8.8.8 (–æ–±–∏–∫–Ω–æ–≤–µ–Ω–æ —Å—ä—â–æ—Ç–æ) |

**Inside vs Outside:**
- **Inside** = –≤–∞—à–∞—Ç–∞ –ª–æ–∫–∞–ª–Ω–∞ –º—Ä–µ–∂–∞ (LAN)
- **Outside** = –∏–Ω—Ç–µ—Ä–Ω–µ—Ç (WAN)

**Local vs Global:**
- **Local** = –ø—Ä–µ–¥–∏ NAT translation
- **Global** = —Å–ª–µ–¥ NAT translation

---

### –¢–∏–ø–æ–≤–µ NAT (–î–µ—Ç–∞–π–ª–Ω–æ)

#### 1. Static NAT (1:1 Permanent Mapping)

```
–ü—Ä–µ–¥–∏ NAT:                     –°–ª–µ–¥ NAT:
192.168.10.50 (Web Server) ‚Üí 203.0.113.10 (–≤–∏–Ω–∞–≥–∏!)
192.168.10.51 (Mail Server) ‚Üí 203.0.113.11 (–≤–∏–Ω–∞–≥–∏!)
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –ü–æ—Å—Ç–æ—è–Ω–Ω–æ mapping (–Ω–µ —Å–µ –ø—Ä–æ–º–µ–Ω—è)
- 1 private IP ‚Üí 1 public IP
- –í–∏–Ω–∞–≥–∏ –∞–∫—Ç–∏–≤–Ω–æ (–¥–æ—Ä–∏ –±–µ–∑ —Ç—Ä–∞—Ñ–∏–∫)

**–ö–æ–≥–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞:**
- ‚úÖ Web Servers (—Ç—Ä—è–±–≤–∞ –ø–æ—Å—Ç–æ—è–Ω–µ–Ω –ø—É–±–ª–∏—á–µ–Ω –∞–¥—Ä–µ—Å)
- ‚úÖ Mail Servers
- ‚úÖ FTP Servers
- ‚úÖ –í—Å—è–∫–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∫–æ–µ—Ç–æ —Ç—Ä—è–±–≤–∞ –¥–∞ –µ –¥–æ—Å—Ç—ä–ø–Ω–æ –æ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```cisco
ip nat inside source static 192.168.10.50 203.0.113.10
```

---

#### 2. Dynamic NAT (Pool-Based)

```
Pool –æ—Ç –ø—É–±–ª–∏—á–Ω–∏ IPs: 203.0.113.10 - 203.0.113.15 (6 IPs)

–ü—ä—Ä–≤–∏ –∫–ª–∏–µ–Ω—Ç:  192.168.10.10 ‚Üí 203.0.113.10  (–≤–∑–µ–º–µ –ø—ä—Ä–≤–∏—è)
–í—Ç–æ—Ä–∏ –∫–ª–∏–µ–Ω—Ç:  192.168.10.11 ‚Üí 203.0.113.11  (–≤–∑–µ–º–µ –≤—Ç–æ—Ä–∏—è)
...
–°–µ–¥–º–∏ –∫–ª–∏–µ–Ω—Ç:  192.168.10.16 ‚Üí ‚ùå NO IP AVAILABLE!
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –í—Ä–µ–º–µ–Ω–Ω–æ mapping (—Å–∞–º–æ –¥–æ–∫–∞—Ç–æ –∏–º–∞ —Ç—Ä–∞—Ñ–∏–∫)
- First-come, first-served
- –ê–∫–æ pool-—ä—Ç –µ –ø—ä–ª–µ–Ω ‚Üí –Ω–æ–≤–∏—Ç–µ –∑–∞—è–≤–∫–∏ —Å–µ –æ—Ç—Ö–≤—ä—Ä–ª—è—Ç

**–ü—Ä–æ–±–ª–µ–º–∏:**
- ‚ùå –ò–∑–∏—Å–∫–≤–∞ –º–Ω–æ–≥–æ –ø—É–±–ª–∏—á–Ω–∏ IP –∞–¥—Ä–µ—Å–∏
- ‚ùå Waste –Ω–∞ –∞–¥—Ä–µ—Å–∏ (1:1 mapping)
- ‚ùå –ê–∫–æ pool –µ –ø—ä–ª–µ–Ω ‚Üí –Ω–∏–∫–æ–π –Ω–æ–≤ –Ω–µ –º–æ–∂–µ –¥–∞ –∏–∑–ª–µ–∑–µ

**–†—è–¥–∫–æ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞** –≤ –ø—Ä–∞–∫—Ç–∏–∫–∞—Ç–∞!

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```cisco
ip nat pool MY_POOL 203.0.113.10 203.0.113.15 netmask 255.255.255.0
access-list 1 permit 192.168.10.0 0.0.0.255
ip nat inside source list 1 pool MY_POOL
```

---

#### 3. PAT (Port Address Translation) - Overload

**–ù–∞–π-—á–µ—Å—Ç–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–∏—è—Ç –º–µ—Ç–æ–¥!**

```
–ï–î–ò–ù –ø—É–±–ª–∏—á–µ–Ω IP ‚Üí —Ö–∏–ª—è–¥–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

192.168.10.10:54321 ‚Üí 203.0.113.1:54321
192.168.10.11:54322 ‚Üí 203.0.113.1:54322  ‚Üê –°–™–©–ò–Ø IP!
192.168.10.12:54323 ‚Üí 203.0.113.1:54323  ‚Üê –°–™–©–ò–Ø IP!
...
192.168.10.100:60000 ‚Üí 203.0.113.1:60000 ‚Üê –°–™–©–ò–Ø IP!
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∏ –ø–æ—Ä—Ç–æ–≤–µ—Ç–µ:**
- –í—Å–µ–∫–∏ TCP/UDP –∫–æ–º—É–Ω–∏–∫–∞—Ü–∏—è –∏–∑–ø–æ–ª–∑–≤–∞ **Source Port** (—Å–ª—É—á–∞–µ–Ω –Ω–æ–º–µ—Ä 49152-65535)
- NAT Router –∑–∞–ø–æ–º–Ω—è: "Source Port 54321 ‚Üí PC1"
- –ú–æ–∂–µ –¥–∞ –ø–æ–¥–¥—ä—Ä–∂–∞ **65,000+ –µ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∏ –≤—Ä—ä–∑–∫–∏** —Å 1 –ø—É–±–ª–∏—á–µ–Ω IP!

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
-  –ú–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ ‚Üí 1 –ø—É–±–ª–∏—á–µ–Ω IP
-  –ò–∑–ø–æ–ª–∑–≤–∞ –ø–æ—Ä—Ç–æ–≤–µ –∑–∞ —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–∞–≤–∞–Ω–µ
-  –ù–∞–π-–µ—Ñ–µ–∫—Ç–∏–≤–µ–Ω –º–µ—Ç–æ–¥

**–ö–æ–≥–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞:**
- ‚úÖ –î–æ–º–∞—à–Ω–∞ –º—Ä–µ–∂–∞ (–≤—Å–∏—á–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å–ø–æ–¥–µ–ª—è—Ç 1 IP)
- ‚úÖ –ú–∞–ª–∫–∏ –æ—Ñ–∏—Å–∏
- ‚úÖ –°—Ä–µ–¥–Ω–∏ –∫–æ–º–ø–∞–Ω–∏–∏ (–¥–µ—Å–µ—Ç–∫–∏/—Å—Ç–æ—Ç–∏—Ü–∏ PC-—Ç–∞ ‚Üí 1-5 –ø—É–±–ª–∏—á–Ω–∏ IPs)

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```cisco
access-list 1 permit 192.168.10.0 0.0.0.255
ip nat inside source list 1 interface Serial0/0/0 overload
```

–ö–ª—é—á–æ–≤–∞—Ç–∞ –¥—É–º–∞ **`overload`** –∞–∫—Ç–∏–≤–∏—Ä–∞ PAT!

---

#### 4. Port Forwarding (Static PAT)

**–ö–æ–º–±–∏–Ω–∏—Ä–∞ Static NAT —Å PAT**

```
–ò–Ω—Ç–µ—Ä–Ω–µ—Ç –∫–ª–∏–µ–Ω—Ç –∏—Å–∫–∞: http://203.0.113.1:8080
                               ‚Üì
                        NAT Router –ø—Ä–µ–ø—Ä–∞—â–∞
                               ‚Üì
                      Web Server 192.168.10.50:80
```

**–£–ø–æ—Ç—Ä–µ–±–∞:**
- ‚úÖ Hosting –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —É—Å–ª—É–≥–∏ —Å 1 –ø—É–±–ª–∏—á–µ–Ω IP
- ‚úÖ Port 8080 ‚Üí Internal Web Server (port 80)
- ‚úÖ Port 2222 ‚Üí Internal SSH Server (port 22)
- ‚úÖ Port 3389 ‚Üí Internal RDP Server (port 3389)

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```cisco
ip nat inside source static tcp 192.168.10.50 80 203.0.113.1 8080
```

---

### –ó–∞—â–æ –µ –≤–∞–∂–µ–Ω NAT? (–û–±–æ–±—â–µ–Ω–∏–µ)

‚úÖ **IPv4 Conservation** - –ø–æ–∑–≤–æ–ª—è–≤–∞ –º–∏–ª–∏–∞—Ä–¥–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏ IPs  
‚úÖ **–°–∏–≥—É—Ä–Ω–æ—Å—Ç** - —Å–∫—Ä–∏–≤–∞ –≤—ä—Ç—Ä–µ—à–Ω–∞—Ç–∞ —Ç–æ–ø–æ–ª–æ–≥–∏—è  
‚úÖ **–ì—ä–≤–∫–∞–≤–æ—Å—Ç** - –ª–µ—Å–Ω–∞ –ø—Ä–æ–º—è–Ω–∞ –Ω–∞ ISP –±–µ–∑ re-IP  
‚úÖ **–ò–∫–æ–Ω–æ–º–∏—è** - –Ω–µ –µ –Ω—É–∂–Ω–æ –¥–∞ –∫—É–ø—É–≤–∞—Ç–µ –º–Ω–æ–≥–æ –ø—É–±–ª–∏—á–Ω–∏ IPs  
‚ùå **–ó–∞–±–∞–≤—è —Ç—Ä–∞—Ñ–∏–∫–∞** - NAT translation overhead  
‚ùå **–£—Å–ª–æ–∂–Ω—è–≤–∞ troubleshooting** - hidden layer  
‚ùå **–ü—Ä–æ–±–ª–µ–º–∏ —Å P2P** - –∏–∑–∏—Å–∫–≤–∞ port forwarding  

**–í –±—ä–¥–µ—â–µ:** IPv6 —â–µ –µ–ª–∏–º–∏–Ω–∏—Ä–∞ –Ω—É–∂–¥–∞—Ç–∞ –æ—Ç NAT (340 undecillion –∞–¥—Ä–µ—Å–∏!)

---## –¢–û–ü–û–õ–û–ì–ò–Ø

```
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ   INTERNET SIMULATION       ‚îÇ
    ‚îÇ   ISP-Router (2911)         ‚îÇ
    ‚îÇ   - Loopback0: 8.8.8.8/32   ‚îÇ
    ‚îÇ   - Loopback1: 1.1.1.1/32   ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ Se0/0/0 (DCE) 
               ‚îÇ 209.165.200.1/30
               ‚îÇ clock rate 64000
               ‚îÇ
               ‚îÇ Se0/0/0 (DTE)
               ‚îÇ 209.165.200.2/30
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   R1-NAT    ‚îÇ (NAT Router 2911)
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ G0/0 (inside)
               ‚îÇ 192.168.10.1/24
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ    SW1      ‚îÇ (Switch 2960-24TT)
        ‚îî‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îò
          ‚îÇ        ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ  PC1   ‚îÇ  ‚îÇ Server1 ‚îÇ
    ‚îÇ .10.10 ‚îÇ  ‚îÇ .10.50  ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ó–∞—â–æ ISP Router –≤–º–µ—Å—Ç–æ Cloud?

- ‚úÖ –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞ —Å–∏–º—É–ª–∞—Ü–∏—è –Ω–∞ ISP
- ‚úÖ Loopback –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ –∑–∞ —Å–∏–º—É–ª–∞—Ü–∏—è –Ω–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —É—Å–ª—É–≥–∏ (8.8.8.8, 1.1.1.1)
- ‚úÖ –ü—ä–ª–Ω–∞ routing –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ Compatibility —Å Lab 9

---

## –ß–ê–°–¢ 0: –ò–∑–≥—Ä–∞–∂–¥–∞–Ω–µ –Ω–∞ ISP –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –°–¢–™–ü–ö–ê 0: –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ —Ç–æ–ø–æ–ª–æ–≥–∏—è—Ç–∞

**–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:**
- **2x Router 2911** (ISP-Router –∏ R1-NAT)
- **1x Switch 2960-24TT** (SW1)
- **2x PC** (PC1, Server1)

**–ö–∞–±–µ–ª–∏—Ä–∞–Ω–µ:**
```
ISP-Router Se0/0/0 (DCE) ‚Üî R1-NAT Se0/0/0 (DTE)
R1-NAT Gi0/0 ‚Üî SW1 Gi0/1
SW1 Fa0/1 ‚Üî PC1
SW1 Fa0/2 ‚Üî Server1
```

**–í–ê–ñ–ù–û:** ISP-Router Se0/0/0 –µ **DCE** (–∏–º–∞ `clock rate 64000`)

---

### –°–¢–™–ü–ö–ê 0.1: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞ ISP Router

```cisco
enable
configure terminal
hostname ISP-Router
no ip domain-lookup

! Loopback –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ (—Å–∏–º—É–ª–∏—Ä–∞—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç)
interface loopback 0
 ip address 8.8.8.8 255.255.255.255
 exit

interface loopback 1
 ip address 1.1.1.1 255.255.255.255
 exit

! WAN –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (DCE —Å—Ç—Ä–∞–Ω–∞)
interface serial 0/0/0
 ip address 209.165.200.1 255.255.255.252
 clock rate 64000
 no shutdown
 exit

! Static route –∫—ä–º customer network
ip route 203.0.113.0 255.255.255.0 209.165.200.2

end
copy running-config startup-config
```

---

## –ß–ê–°–¢ 1: Static NAT (–∑–∞ —Å—ä—Ä–≤—ä—Ä–∏)

### –°–¢–™–ü–ö–ê 1: –ë–∞–∑–æ–≤–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞ R1-NAT Router

```cisco
enable
configure terminal
hostname R1-NAT
no ip domain-lookup

! Inside interface
interface gigabitEthernet 0/0
 ip address 192.168.10.1 255.255.255.0
 no shutdown
 exit

! Outside interface (DTE —Å—Ç—Ä–∞–Ω–∞ - –ë–ï–ó clock rate!)
interface serial 0/0/0
 ip address 209.165.200.2 255.255.255.252
 no shutdown
 exit

! Default route –∫—ä–º ISP
ip route 0.0.0.0 0.0.0.0 209.165.200.1

end
copy running-config startup-config
```

### –°–¢–™–ü–ö–ê 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ connectivity

```cisco
ping 209.165.200.1
ping 8.8.8.8
```
‚úÖ –ê–∫–æ —Ä–∞–±–æ—Ç–∏, WAN –≤—Ä—ä–∑–∫–∞—Ç–∞ –µ –ø—Ä–∞–≤–∏–ª–Ω–∞!

---

### –°–¢–™–ü–ö–ê 3: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–µ –Ω–∞ Static NAT

**–°—Ü–µ–Ω–∞—Ä–∏–π:** Server1 (192.168.10.50) ‚Üí –ø—É–±–ª–∏—á–µ–Ω IP 203.0.113.50

```cisco
configure terminal

! –ú–∞—Ä–∫–∏—Ä–∞–π inside/outside –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏
interface gigabitEthernet 0/0
 ip nat inside
 exit

interface serial 0/0/0
 ip nat outside
 exit

! Static NAT mapping
ip nat inside source static 192.168.10.50 203.0.113.50

end
copy running-config startup-config
```

### –°–¢–™–ü–ö–ê 4: –¢–µ—Å—Ç–≤–∞–Ω–µ

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–π Server1:** IP: 192.168.10.50, Gateway: 192.168.10.1

```cisco
show ip nat translations

! –û—á–∞–∫–≤–∞–Ω –∏–∑—Ö–æ–¥:
Pro Inside global      Inside local       Outside local      Outside global
--- 203.0.113.50       192.168.10.50      ---                ---
```

---

## –ß–ê–°–¢ 2: Dynamic NAT (pool-based)

### –°–¢–™–ü–ö–ê 5: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–µ –Ω–∞ Dynamic NAT

**–°—Ü–µ–Ω–∞—Ä–∏–π:** Pool –æ—Ç 10 –ø—É–±–ª–∏—á–Ω–∏ IP –∞–¥—Ä–µ—Å–∞ (203.0.113.10-19)

```cisco
configure terminal

! ACL –∑–∞ inside addresses
access-list 1 permit 192.168.10.0 0.0.0.255

! NAT pool
ip nat pool PUBLIC_POOL 203.0.113.10 203.0.113.19 netmask 255.255.255.0

! –°–≤—ä—Ä–∂–∏ ACL —Å pool
ip nat inside source list 1 pool PUBLIC_POOL

end
```

**–ü—Ä–æ–±–ª–µ–º:** –ê–∫–æ –∏–º–∞—à 11+ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –Ω–æ —Å–∞–º–æ 10 IPs ‚Üí –ø–æ—Å–ª–µ–¥–Ω–∏—Ç–µ –Ω—è–º–∞—Ç –¥–æ—Å—Ç—ä–ø!  
**–†–µ—à–µ–Ω–∏–µ:** –ò–∑–ø–æ–ª–∑–≤–∞–π PAT (—Å–ª–µ–¥–≤–∞—â–∞—Ç–∞ —Å–µ–∫—Ü–∏—è)

---

## –ß–ê–°–¢ 3: PAT (NAT Overload) - –ù–∞–π-—á–µ—Å—Ç–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω

### –°–¢–™–ü–ö–ê 6: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–µ –Ω–∞ PAT

**–°—Ü–µ–Ω–∞—Ä–∏–π:** –ï–¥–∏–Ω –ø—É–±–ª–∏—á–µ–Ω IP –∑–∞ –≤—Å–∏—á–∫–∏ –≤—ä—Ç—Ä–µ—à–Ω–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

```cisco
configure terminal

! –ü—Ä–µ–º–∞—Ö–Ω–∏ –ø—Ä–µ–¥–∏—à–Ω–∏—Ç–µ NAT –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
no ip nat inside source list 1 pool PUBLIC_POOL
no ip nat pool PUBLIC_POOL

! PAT using outside interface IP
ip nat inside source list 1 interface serial 0/0/0 overload

end
copy running-config startup-config
```

**–ö–ª—é—á–æ–≤–∞ –¥—É–º–∞:** `overload` - —Ç–æ–≤–∞ –µ PAT!

### –°–¢–™–ü–ö–ê 7: –¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ PAT

–û—Ç PC1: `ping 8.8.8.8`  
–û—Ç Server1: `ping 1.1.1.1`

```cisco
show ip nat translations

! –û—á–∞–∫–≤–∞–Ω –∏–∑—Ö–æ–¥:
Pro Inside global           Inside local          Outside local         Outside global
icmp 209.165.200.2:1        192.168.10.10:1       8.8.8.8:1             8.8.8.8:1
icmp 209.165.200.2:2        192.168.10.50:1       1.1.1.1:2             1.1.1.1:2
     ^^^^^^^^^^^^^^         ^^^^^^^^^^^^^^^^
     –°–™–©–ò–Ø–¢ –ø—É–±–ª–∏—á–µ–Ω IP!    –†–ê–ó–õ–ò–ß–ù–ò private IPs!
```

---

## –ß–ê–°–¢ 4: –ö–æ–º–±–∏–Ω–∏—Ä–∞–Ω–µ –Ω–∞ Static NAT + PAT

### –°–¢–™–ü–ö–ê 8: Real-World —Å—Ü–µ–Ω–∞—Ä–∏–π

**–ò–∑–∏—Å–∫–≤–∞–Ω–∏—è:**
1. Web Server (192.168.10.50) –¥–æ—Å—Ç—ä–ø–µ–Ω –æ—Ç–≤—ä–Ω –Ω–∞ 203.0.113.50
2. –í—Å–∏—á–∫–∏ —Å–ª—É–∂–∏—Ç–µ–ª–∏ –∏–º–∞—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —á—Ä–µ–∑ PAT

```cisco
configure terminal

! 1. Static NAT –∑–∞ Web Server
ip nat inside source static 192.168.10.50 203.0.113.50

! 2. ACL –∑–∞ —Å–ª—É–∂–∏—Ç–µ–ª–∏—Ç–µ (exclude Web Server)
access-list 1 deny   192.168.10.50
access-list 1 permit 192.168.10.0 0.0.0.255

! 3. PAT –∑–∞ —Å–ª—É–∂–∏—Ç–µ–ª–∏—Ç–µ
ip nat inside source list 1 interface serial 0/0/0 overload

end
copy running-config startup-config
```

---

## –ß–ê–°–¢ 5: Port Forwarding (Static PAT)

### –°–¢–™–ü–ö–ê 9: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–µ –Ω–∞ Port Forwarding

**–°—Ü–µ–Ω–∞—Ä–∏–π:** Web server –Ω–∞ –ø–æ—Ä—Ç 8080 –≤—ä—Ç—Ä–µ—à–Ω–æ ‚Üí –ø–æ—Ä—Ç 80 –≤—ä–Ω—à–Ω–æ

```cisco
ip nat inside source static tcp 192.168.10.50 8080 203.0.113.50 80 extendable
```

**–ü—Ä–∏–º–µ—Ä–∏:**
```cisco
! SSH
ip nat inside source static tcp 192.168.10.50 22 203.0.113.50 22

! RDP
ip nat inside source static tcp 192.168.10.51 3389 203.0.113.50 3389
```

---

## VERIFICATION COMMANDS

```cisco
! –í–∏–∂ NAT translations
show ip nat translations

! –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
show ip nat statistics

! –í–∏–∂ ACL
show access-lists

! NAT –≤ running-config
show running-config | include nat

! –î–µ–±—ä–≥ (–≤–Ω–∏–º–∞–≤–∞–π - –º–Ω–æ–≥–æ output!)
debug ip nat
undebug all

! –ò–∑—á–∏—Å—Ç–∏ translations
clear ip nat translation *
```

---

## VERIFICATION CHECKLIST

### ‚úÖ Static NAT:
```
‚òê ip nat inside/outside —Å–∞ –∑–∞–¥–∞–¥–µ–Ω–∏
‚òê Static mapping –µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω
‚òê Ping –æ—Ç ISP –∫—ä–º public IP —Ä–∞–±–æ—Ç–∏
‚òê show ip nat translations –ø–æ–∫–∞–∑–≤–∞ mapping
```

### ‚úÖ PAT (Overload):
```
‚òê ACL permit –≤—ä—Ç—Ä–µ—à–Ω–∏ –∞–¥—Ä–µ—Å–∏
‚òê "overload" keyword –µ –∏–∑–ø–æ–ª–∑–≤–∞–Ω
‚òê –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ ping –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –µ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
‚òê show ip nat translations –ø–æ–∫–∞–∑–≤–∞ —Ä–∞–∑–ª–∏—á–Ω–∏ –ø–æ—Ä—Ç–æ–≤–µ
```

---

## –ß–ï–°–¢–û –°–†–ï–©–ê–ù–ò –ü–†–û–ë–õ–ï–ú–ò

### –ü—Ä–æ–±–ª–µ–º 1: NAT –Ω–µ —Ä–∞–±–æ—Ç–∏

**–ü—Ä–∏—á–∏–Ω–∞:** Inside/Outside –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ –Ω–µ —Å–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–∏

**–†–µ—à–µ–Ω–∏–µ:**
```cisco
interface gigabitEthernet 0/0
 ip nat inside
interface serial 0/0/0
 ip nat outside
```

### –ü—Ä–æ–±–ª–µ–º 2: –ù—è–º–∞ translations

**–ü—Ä–∏—á–∏–Ω–∞:** ACL –Ω–µ permit-–≤–∞ —Ç—Ä–∞—Ñ–∏–∫–∞

**–†–µ—à–µ–Ω–∏–µ:**
```cisco
show access-lists
! –ü—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ ACL permit-–≤–∞ –ø—Ä–∞–≤–∏–ª–Ω–∏—è subnet
access-list 1 permit 192.168.10.0 0.0.0.255
```

### –ü—Ä–æ–±–ª–µ–º 3: Serial –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ä—Ç –µ down

**–ü—Ä–∏—á–∏–Ω–∞:** –õ–∏–ø—Å–≤–∞ clock rate –Ω–∞ DCE —Å—Ç—Ä–∞–Ω–∞—Ç–∞

**–†–µ—à–µ–Ω–∏–µ:**
```cisco
! –ù–∞ ISP-Router (DCE —Å—Ç—Ä–∞–Ω–∞):
interface serial 0/0/0
 clock rate 64000
 no shutdown
```

### –ü—Ä–æ–±–ª–µ–º 4: Dynamic NAT pool –µ –ø—ä–ª–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:** –ò–∑–ø–æ–ª–∑–≤–∞–π PAT (overload)
```cisco
ip nat inside source list 1 pool PUBLIC_POOL overload
```

---

## TROUBLESHOOTING WORKFLOW

```
1. –ü—Ä–æ–≤–µ—Ä–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏: show ip interface brief
   ‚îî‚îÄ –í—Å–∏—á–∫–∏ up/up?

2. –ü—Ä–æ–≤–µ—Ä–∏ ip nat inside/outside
   ‚îî‚îÄ show ip interface Gi0/0 | include NAT

3. –ü—Ä–æ–≤–µ—Ä–∏ ACL: show access-lists
   ‚îî‚îÄ permit –ø—Ä–∞–≤–∏–ª–Ω–∏—è subnet?

4. –ü—Ä–æ–≤–µ—Ä–∏ NAT config: show run | include nat
   ‚îî‚îÄ –ò–º–∞ –ª–∏ "overload" –∑–∞ PAT?

5. –ü—Ä–æ–≤–µ—Ä–∏ routing: show ip route
   ‚îî‚îÄ –ò–º–∞ –ª–∏ default route?

6. Debug: debug ip nat
   ‚îî‚îÄ –í–∏–∂–¥–∞—à –ª–∏ translations?
```

---

## –ó–ê–î–ê–ß–ò –ó–ê –°–ê–ú–û–°–¢–û–Ø–¢–ï–õ–ù–ê –†–ê–ë–û–¢–ê

### –ó–∞–¥–∞—á–∞ 1: Port Forwarding –∑–∞ multiple services

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–π Port Forwarding –∑–∞:
- Web Server (HTTP): 192.168.10.50:80 ‚Üí 203.0.113.1:80
- SSH Server: 192.168.10.50:22 ‚Üí 203.0.113.1:22

### –ó–∞–¥–∞—á–∞ 2: Multiple Static NAT mappings

–°—ä–∑–¥–∞–π Static NAT –∑–∞:
- Web Server: 192.168.10.50 ‚Üí 203.0.113.50
- Mail Server: 192.168.10.51 ‚Üí 203.0.113.51

–î–æ–±–∞–≤–∏ PAT –∑–∞ –æ—Å—Ç–∞–Ω–∞–ª–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ —Ç–µ—Å—Ç–≤–∞–π.

---

## –†–ï–ê–õ–ï–ù –°–¶–ï–ù–ê–†–ò–ô: –ö–æ–º–ø–∞–Ω–∏—è —Å—ä—Å —Å–æ–±—Å—Ç–≤–µ–Ω Web —Å—ä—Ä–≤—ä—Ä

**–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- 3 –ø—É–±–ª–∏—á–Ω–∏ IP –∞–¥—Ä–µ—Å–∞ (203.0.113.10-12)
- Web Server: 192.168.1.10
- Mail Server: 192.168.1.11
- 100 —Å–ª—É–∂–∏—Ç–µ–ª–∏

**–†–µ—à–µ–Ω–∏–µ:**
```cisco
! Static NAT –∑–∞ —Å—ä—Ä–≤—ä—Ä–∏
ip nat inside source static 192.168.1.10 203.0.113.10
ip nat inside source static 192.168.1.11 203.0.113.11

! PAT –∑–∞ —Å–ª—É–∂–∏—Ç–µ–ª–∏ (exclude —Å—ä—Ä–≤—ä—Ä–∏—Ç–µ)
access-list 1 deny   192.168.1.10
access-list 1 deny   192.168.1.11
access-list 1 permit 192.168.1.0 0.0.0.255
ip nat inside source list 1 interface GigabitEthernet0/1 overload
```

---

## NAT –¢–ï–†–ú–ò–ù–û–õ–û–ì–ò–Ø

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    NAT ROUTER                           ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  Inside Local ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄNAT‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ Inside Global           ‚îÇ
‚îÇ  (Private IP)                  (Public IP)             ‚îÇ
‚îÇ  192.168.10.10 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ 203.0.113.10            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

- **Inside Local:** Private IP –≤ –ª–æ–∫–∞–ª–Ω–∞—Ç–∞ –º—Ä–µ–∂–∞
- **Inside Global:** Public IP —Å–ª–µ–¥ NAT
- **Outside Global:** –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª–Ω–∏—è—Ç IP –Ω–∞ –≤—ä–Ω—à–Ω–æ—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

---

## BEST PRACTICES

1. ‚úÖ **–ò–∑–ø–æ–ª–∑–≤–∞–π PAT –∑–∞ –ø–æ–≤–µ—á–µ—Ç–æ —Å–ª—É—á–∞–∏** - –∏–∫–æ–Ω–æ–º–∏—è –Ω–∞ IPs
2. ‚úÖ **Static NAT —Å–∞–º–æ –∑–∞ —Å—ä—Ä–≤—ä—Ä–∏** - –∫–æ–≥–∞—Ç–æ —Ç—Ä—è–±–≤–∞ –≤—Ö–æ–¥—è—â–∞ –≤—Ä—ä–∑–∫–∞
3. ‚úÖ **ACL —Ç—Ä—è–±–≤–∞ –¥–∞ –µ –∫–æ–Ω–∫—Ä–µ—Ç–µ–Ω** - –Ω–µ `permit any`
4. ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–∞–π NAT –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ç–∞**
5. ‚úÖ **NAT –Ω–µ –µ firewall!** - –∏–∑–ø–æ–ª–∑–≤–∞–π ACL –∑–∞ —Å–∏–≥—É—Ä–Ω–æ—Å—Ç

---

## –í–†–™–ó–ö–ê –° LAB 9

> **üîó –ü–†–û–î–™–õ–ñ–ï–ù–ò–ï –í LAB 9:**

–í **Lab 9: Integrated Network Design** —â–µ:
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–∞—Ç–µ NAT —Å –ø—ä–ª–Ω–∞—Ç–∞ –º—Ä–µ–∂–∞ –æ—Ç Lab 1-7
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞—Ç–µ PAT –∑–∞ –≤—Å–∏—á–∫–∏ VLANs (Sales, Engineering, Guest)
- –ö–æ–º–±–∏–Ω–∏—Ä–∞—Ç–µ NAT —Å Inter-VLAN routing, DHCP, DNS, ACL
- –°—ä–∑–¥–∞–¥–µ—Ç–µ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–∞ enterprise –º—Ä–µ–∂–∞ —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–æ—Å—Ç—ä–ø

**–¢–æ–ø–æ–ª–æ–≥–∏—è—Ç–∞ –æ—Ç Lab 8 —â–µ –±—ä–¥–µ –æ—Å–Ω–æ–≤–∞ –∑–∞ Lab 9!**

> **–¶–Ø–õ–û–°–¢–ù–ê –ü–†–û–ì–†–ï–°–ò–Ø:**
> - Lab 1 ‚Üí –û—Å–Ω–æ–≤–∏ (Router + 2 Switches, Management VLAN 99)
> - Lab 2 ‚Üí VLAN-–∏ (3 –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏ VLAN + Inter-VLAN routing + Port Security)
> - Lab 3 ‚Üí DHCP (–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–∞ IP –∞–¥—Ä–µ—Å–∏—Ä–∞–Ω–µ)
> - Lab 4 ‚Üí DNS (name resolution + 5 A records + 2 CNAME records)
> - Lab 5 ‚Üí ACL + SSH (—Å–∏–≥—É—Ä–Ω–æ—Å—Ç –∏ –∫–æ–Ω—Ç—Ä–æ–ª –Ω–∞ –¥–æ—Å—Ç—ä–ø)
> - Lab 6 ‚Üí IoT –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
> - Lab 7 ‚Üí –ô–µ—Ä–∞—Ä—Ö–∏—á–Ω–∞ —Ç–æ–ø–æ–ª–æ–≥–∏—è (enterprise design)
> - Lab 8 ‚Üí NAT (–∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–≤—ä—Ä–∑–∞–Ω–æ—Å—Ç + ISP simulation) ‚úì
> - Lab 9 ‚Üí –§–∏–Ω–∞–ª–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–≤—Å–∏—á–∫–∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –∑–∞–µ–¥–Ω–æ)

---

---

## –ö–ê–ö–í–û –ù–ê–£–ß–ò–•–ú–ï

1. ‚úÖ –ö–∞–∫–≤–æ –µ NAT –∏ —Ç–∏–ø–æ–≤–µ—Ç–µ (Static, Dynamic, PAT)
2. ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞ ISP Router –∑–∞ —Å–∏–º—É–ª–∞—Ü–∏—è
3. ‚úÖ Static NAT –∑–∞ —Å—ä—Ä–≤—ä—Ä–∏
4. ‚úÖ PAT (Overload) –∑–∞ —Å–ø–æ–¥–µ–ª—è–Ω–µ –Ω–∞ IP
5. ‚úÖ Port Forwarding (Static PAT)
6. ‚úÖ –ö–æ–º–±–∏–Ω–∏—Ä–∞–Ω–µ –Ω–∞ Static NAT + PAT
7. ‚úÖ Troubleshooting NAT –ø—Ä–æ–±–ª–µ–º–∏

---

**–ó–∞–ø–∞–∑–∏ .pkt —Ñ–∞–π–ª–∞ –∫–∞—Ç–æ `Lab8_NAT_Configuration.pkt`**

**–í–ê–ñ–ù–û:** –¢–æ–∑–∏ –ª–∞–± –∏–∑–ø–æ–ª–∑–≤–∞ ISP Router –≤–º–µ—Å—Ç–æ Cloud —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∑–∞ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞ —Å–∏–º—É–ª–∞—Ü–∏—è.



**–≥–ª. –∞—Å. –°–≤–µ—Ç–æ—Å–ª–∞–≤ –ê—Ç–∞–Ω–∞—Å–æ–≤**  
svetoslav.atanasov@trakia-uni.bg


<script data-goatcounter="https://satanasov.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>

<script src="/SNA/assets/js/analytics-logger.js"></script>